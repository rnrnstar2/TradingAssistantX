# X API v2 設定ファイル
api_version: "v2"
tier: "basic"  # free/basic/pro/enterprise
auth_type: "bearer_token"  # bearer_token/oauth2

# v2 API エンドポイント設定
endpoints:
  tweets: "/2/tweets"
  users: "/2/users"
  user_me: "/2/users/me"
  timeline: "/2/users/:id/tweets"
  search: "/2/tweets/search/recent"  # Proプラン以上
  search_all: "/2/tweets/search/all"  # Enterpriseプラン以上
  likes: "/2/users/:id/liked_tweets"  # Proプラン以上
  retweets: "/2/tweets/:id/retweeted_by"  # Proプラン以上

# APIティア別レート制限
rate_limits:
  free:
    posts_per_month: 500
    reads_per_month: 100
    requests_per_15min:
      tweets: 1  # ツイート投稿: 1リクエスト/15分
      users: 75  # ユーザー情報取得: 75リクエスト/15分
  basic:
    posts_per_month: 3000
    reads_per_month: 10000
    requests_per_15min:
      tweets: 50  # ツイート投稿: 50リクエスト/15分
      users: 300  # ユーザー情報取得: 300リクエスト/15分
      timeline: 75  # タイムライン取得: 75リクエスト/15分
  pro:
    posts_per_month: 300000
    reads_per_month: 1000000
    requests_per_15min:
      tweets: 300  # ツイート投稿: 300リクエスト/15分
      users: 900  # ユーザー情報取得: 900リクエスト/15分
      timeline: 300  # タイムライン取得: 300リクエスト/15分
      search: 300  # 検索: 300リクエスト/15分
      likes: 300  # いいね取得: 300リクエスト/15分
      retweets: 300  # リツイート取得: 300リクエスト/15分
  enterprise:
    posts_per_month: 3000000
    reads_per_month: 10000000
    requests_per_15min:
      tweets: 3000  # ツイート投稿: 3000リクエスト/15分
      users: 9000  # ユーザー情報取得: 9000リクエスト/15分
      timeline: 3000  # タイムライン取得: 3000リクエスト/15分
      search: 3000  # 検索: 3000リクエスト/15分
      search_all: 3000  # 全件検索: 3000リクエスト/15分
      likes: 3000  # いいね取得: 3000リクエスト/15分
      retweets: 3000  # リツイート取得: 3000リクエスト/15分

# 段階的移行設定
migration:
  use_v2_by_default: true
  fallback_to_v1: false  # v2失敗時にv1.1にフォールバックするか
  test_mode: false  # テストモード時は実際の投稿を行わない

# v2 API固有の設定
v2_features:
  expansions:
    enabled: true
    default_fields:
      - "author_id"
      - "created_at"
      - "public_metrics"
  media:
    upload_enabled: false  # Phase 2で実装予定
    max_file_size_mb: 5
  threads:
    enabled: false  # Phase 2で実装予定
    max_tweets_per_thread: 10

# エラーハンドリング設定
error_handling:
  retry_attempts: 3
  retry_delay_ms: 1000
  rate_limit_wait: true  # レート制限時に待機するか
  log_errors: true
  detailed_error_messages: true

# 認証設定
authentication:
  token_cache_enabled: true
  token_cache_duration_minutes: 55  # OAuth2トークンキャッシュ時間
  auto_refresh_token: true

# ロギング設定
logging:
  log_requests: false  # リクエスト内容をログ出力するか
  log_responses: false  # レスポンス内容をログ出力するか
  log_auth_headers: false  # 認証ヘッダーをログ出力するか（セキュリティリスク）
  log_metrics: true  # メトリクス情報をログ出力するか

# 環境変数設定例（実際の値は.envファイルで設定）
environment_variables:
  X_BEARER_TOKEN: "your_bearer_token"  # Bearer Token認証用
  X_CLIENT_ID: "your_client_id"  # OAuth 2.0用
  X_CLIENT_SECRET: "your_client_secret"  # OAuth 2.0用
  X_API_TIER: "basic"  # APIティア設定
  MODE: "development"  # 本番/開発モード切り替え