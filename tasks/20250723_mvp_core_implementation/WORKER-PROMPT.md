# ğŸš€ Workerå®Ÿè¡Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ - MVPã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…

## ğŸ“‹ å®Ÿè£…æŒ‡ç¤º

ã‚ãªãŸã¯TradingAssistantXã®**30åˆ†é–“éš”è‡ªå‹•å®Ÿè¡ŒMVPã‚·ã‚¹ãƒ†ãƒ **ã®å®Ÿè£…ã‚’æ‹…å½“ã™ã‚‹Workerã§ã™ã€‚Clean Architectureã‚ˆã‚Šã‚‚**å‹•ä½œã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ **ã‚’æœ€å„ªå…ˆã«å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

## ğŸ¯ MVPå®Ÿè£…ç›®æ¨™

**30åˆ†ãŠãã«å®Ÿè¡Œã•ã‚Œã‚‹è‡ªå‹•XæŠ•ç¨¿ã‚·ã‚¹ãƒ†ãƒ **

### åŸºæœ¬ãƒ•ãƒ­ãƒ¼
```
30åˆ†æ¯ã®è‡ªå‹•å®Ÿè¡Œ:
1. dataãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¢ºèªãƒ»èª­ã¿è¾¼ã¿
2. Claude Code SDKã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ±ºå®š  
3. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆæŠ•ç¨¿ãƒ»RTãƒ»å¼•ç”¨RTãƒ»ã„ã„ã­ãƒ»å¾…æ©Ÿï¼‰
4. çµæœè¨˜éŒ²ãƒ»å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æ›´æ–°
```

### 5ã¤ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç¨®åˆ¥
- **æŠ•ç¨¿**: ãƒˆãƒ”ãƒƒã‚¯æ±ºå®šâ†’å†…å®¹ç”Ÿæˆâ†’æŠ•ç¨¿å®Ÿè¡Œ
- **ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ**: æ¤œç´¢â†’å€™è£œåˆ†æâ†’RTå®Ÿè¡Œ  
- **å¼•ç”¨ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ**: æ¤œç´¢â†’Claudeè©•ä¾¡â†’å¼•ç”¨ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆâ†’å®Ÿè¡Œ
- **ã„ã„ã­**: æ¤œç´¢â†’å“è³ªè©•ä¾¡â†’ã„ã„ã­å®Ÿè¡Œ
- **å¾…æ©Ÿ**: æ¬¡å›30åˆ†å¾Œã¾ã§å¾…æ©Ÿ

## ğŸ“ å®Ÿè£…å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

**12ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»6ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ** - æ©Ÿèƒ½åˆ¥è²¬å‹™åˆ†é›¢

```
src/
â”œâ”€â”€ claude/                    # Claude Code SDKé–¢é€£ (3ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”œâ”€â”€ decision-engine.ts     # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ±ºå®šã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ content-generator.ts   # æŠ•ç¨¿å†…å®¹ç”Ÿæˆ  
â”‚   â””â”€â”€ post-analyzer.ts       # æŠ•ç¨¿åˆ†æãƒ»å“è³ªè©•ä¾¡
â”‚
â”œâ”€â”€ kaito-api/                 # KaitoTwitterAPIé–¢é€£ (3ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”œâ”€â”€ client.ts              # KaitoTwitterAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ search-engine.ts       # æŠ•ç¨¿æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â””â”€â”€ action-executor.ts     # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œçµ±åˆ
â”‚
â”œâ”€â”€ scheduler/                 # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ¶å¾¡ (2ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”œâ”€â”€ core-scheduler.ts      # 30åˆ†é–“éš”åˆ¶å¾¡
â”‚   â””â”€â”€ main-loop.ts           # ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œãƒ«ãƒ¼ãƒ—çµ±åˆ
â”‚
â”œâ”€â”€ data/                      # ãƒ‡ãƒ¼ã‚¿ç®¡ç† (1ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â””â”€â”€ data-manager.ts        # dataãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç®¡ç†
â”‚
â”œâ”€â”€ shared/                    # å…±é€šæ©Ÿèƒ½ (3ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”œâ”€â”€ types.ts               # å‹å®šç¾©çµ±åˆ
â”‚   â”œâ”€â”€ config.ts              # è¨­å®šç®¡ç†
â”‚   â””â”€â”€ logger.ts              # ãƒ­ã‚°ç®¡ç†
â”‚
â””â”€â”€ main.ts                    # ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (1ãƒ•ã‚¡ã‚¤ãƒ«)
```

## ğŸ”§ å®Ÿè£…è¦ä»¶è©³ç´°

### 1. ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼å®Ÿè£… (scheduler/)

#### core-scheduler.ts
```typescript
export class CoreScheduler {
  private isRunning = false;
  private intervalId: NodeJS.Timeout | null = null;
  
  // 30åˆ†é–“éš”ã§ã®è‡ªå‹•å®Ÿè¡Œé–‹å§‹
  start(): void {
    this.intervalId = setInterval(async () => {
      if (!this.isRunning) {
        this.isRunning = true;
        try {
          await this.executeCore();
        } finally {
          this.isRunning = false;
        }
      }
    }, 30 * 60 * 1000); // 30åˆ† = 1800ç§’
  }
  
  // å®Ÿè¡Œåˆ¶å¾¡
  private async executeCore(): Promise<void>
}
```

#### main-loop.ts
```typescript
export class MainLoop {
  // ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œãƒ«ãƒ¼ãƒ—
  async runMainLoop(): Promise<void> {
    // 1. ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
    // 2. Claudeåˆ¤æ–­
    // 3. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
    // 4. çµæœè¨˜éŒ²
  }
}
```

### 2. Claudeæ©Ÿèƒ½å®Ÿè£… (claude/)

#### decision-engine.ts
```typescript
export interface ClaudeDecision {
  action: 'post' | 'retweet' | 'quote_tweet' | 'like' | 'wait';
  reasoning: string;
  parameters: {
    topic?: string;
    searchQuery?: string;
    content?: string;
    targetTweetId?: string;
  };
  confidence: number;
}

export class ClaudeDecisionEngine {
  async makeDecision(context: SystemContext): Promise<ClaudeDecision>
}
```

### 3. KaitoTwitterAPIå®Ÿè£… (kaito-api/)

#### client.ts - æ—¢å­˜x-poster.tsã‚’æ´»ç”¨
```typescript
export class KaitoApiClient {
  // æŠ•ç¨¿å®Ÿè¡Œ
  async createPost(content: string): Promise<PostResult>
  
  // ãƒªãƒ„ã‚¤ãƒ¼ãƒˆå®Ÿè¡Œ  
  async retweet(tweetId: string): Promise<PostResult>
  
  // å¼•ç”¨ãƒªãƒ„ã‚¤ãƒ¼ãƒˆå®Ÿè¡Œ
  async quoteTweet(tweetId: string, comment: string): Promise<PostResult>
  
  // ã„ã„ã­å®Ÿè¡Œ
  async like(tweetId: string): Promise<PostResult>
  
  // æŠ•ç¨¿æ¤œç´¢
  async searchTweets(query: string): Promise<Tweet[]>
}
```

### 4. ãƒ‡ãƒ¼ã‚¿ç®¡ç†å®Ÿè£… (data/)

#### data-manager.ts
```typescript
export class DataManager {
  // å­¦ç¿’ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
  async loadLearningData(): Promise<LearningData>
  
  // ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜æ†¶èª­ã¿è¾¼ã¿
  async loadSessionMemory(): Promise<SessionMemory>
  
  // å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ä¿å­˜
  async saveLearningData(data: LearningData): Promise<void>
  
  // ç¾åœ¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ§‹ç¯‰
  async loadCurrentContext(): Promise<SystemContext>
}
```

## ğŸ¯ å®Ÿè£…å„ªå…ˆé †ä½

### Week 1: åŸºç›¤å®Ÿè£…
1. **shared/types.ts** - å…¨å‹å®šç¾©
2. **shared/config.ts** - è¨­å®šç®¡ç†
3. **shared/logger.ts** - ãƒ­ã‚°ç®¡ç†
4. **data/data-manager.ts** - ãƒ‡ãƒ¼ã‚¿ç®¡ç†

### Week 2: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…  
5. **claude/decision-engine.ts** - Claudeåˆ¤æ–­ã‚¨ãƒ³ã‚¸ãƒ³
6. **claude/content-generator.ts** - æŠ•ç¨¿å†…å®¹ç”Ÿæˆ
7. **kaito-api/client.ts** - KaitoTwitterAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

### Week 3: çµ±åˆå®Ÿè£…
8. **kaito-api/search-engine.ts** - æ¤œç´¢æ©Ÿèƒ½
9. **kaito-api/action-executor.ts** - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
10. **scheduler/main-loop.ts** - ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—

### Week 4: å®Œæˆãƒ»ãƒ†ã‚¹ãƒˆ
11. **scheduler/core-scheduler.ts** - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼
12. **main.ts** - ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•

## âš ï¸ é‡è¦ãªå®Ÿè£…åŸå‰‡

### MVPæœ€å„ªå…ˆ
- **å‹•ä½œç¢ºå®Ÿæ€§ > ç†è«–çš„å®Œç’§æ€§**
- **ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£… > è¤‡é›‘ãªæœ€é©åŒ–**
- **åŸºæœ¬ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆtry-catch + ãƒ­ã‚°ï¼‰**

### æ—¢å­˜æ´»ç”¨
- **æ—¢å­˜x-poster.tsã®æ´»ç”¨**: KaitoAPIçµ±åˆæ©Ÿèƒ½ã‚’æœ€å¤§æ´»ç”¨
- **æ—¢å­˜utils/ã®æ´»ç”¨**: ãƒ­ã‚°ãƒ»èªè¨¼æ©Ÿèƒ½ã®æµç”¨
- **dataãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ **: å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ç¶™ç¶šæ´»ç”¨

### 30åˆ†é–“éš”å®Ÿè£…
- **setInterval(30 * 60 * 1000)** ã«ã‚ˆã‚‹å®šæœŸå®Ÿè¡Œ
- **isRunning**ãƒ•ãƒ©ã‚°ã«ã‚ˆã‚‹ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—é˜²æ­¢
- **ã‚¨ãƒ©ãƒ¼æ™‚ã®æ¬¡å›å®Ÿè¡Œä¿è¨¼**

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

### å¿…é ˆé”æˆç›®æ¨™
- [ ] 30åˆ†é–“éš”ã§ã®ç¢ºå®Ÿãªè‡ªå‹•å®Ÿè¡Œ
- [ ] 5ç¨®é¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæŠ•ç¨¿ãƒ»RTãƒ»å¼•ç”¨RTãƒ»ã„ã„ã­ãƒ»å¾…æ©Ÿï¼‰æ­£å¸¸å‹•ä½œ
- [ ] dataãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æ´»ç”¨
- [ ] Claude Code SDKã«ã‚ˆã‚‹é©åˆ‡ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ¤æ–­
- [ ] KaitoTwitterAPIã«ã‚ˆã‚‹ç¢ºå®Ÿãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

### å“è³ªç›®æ¨™
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã®é©åˆ‡ãªå¾©æ—§ãƒ»ç¶™ç¶šå®Ÿè¡Œ
- [ ] å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®é©åˆ‡ãªè“„ç©ãƒ»æ´»ç”¨
- [ ] æŠ•ç¨¿å“è³ªã®ç¶­æŒï¼ˆæŠ•è³‡æ•™è‚²ä¾¡å€¤ï¼‰
- [ ] ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡95%ä»¥ä¸Š

## ğŸ“‹ å®Œäº†å¾Œã®å¿…é ˆä½œæ¥­

1. **å‹•ä½œç¢ºèª**: 30åˆ†é–“éš”å®Ÿè¡Œã®ç¢ºèª
2. **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ**: å…¨5ç¨®é¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‹•ä½œç¢ºèª
3. **å­¦ç¿’ãƒ‡ãƒ¼ã‚¿**: ãƒ‡ãƒ¼ã‚¿è“„ç©ãƒ»æ´»ç”¨ã®ç¢ºèª
4. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: éšœå®³æ™‚ã®é©åˆ‡ãªå‡¦ç†ç¢ºèª

## ğŸš¨ é‡è¦ãªæ³¨æ„ç‚¹

### ãƒ‡ãƒ¼ã‚¿æ´»ç”¨
- **dataãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¿…é ˆ**: å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®åˆ¤æ–­ææ–™å–å¾—
- **å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æ›´æ–°**: å®Ÿè¡Œçµæœã®é©åˆ‡ãªè¨˜éŒ²ãƒ»è“„ç©
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶™ç¶š**: 30åˆ†é–“éš”ã§ã®çŠ¶æ…‹å¼•ãç¶™ã

### Claudeçµ±åˆ
- **åˆ¤æ–­ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: ç¾åœ¨çŠ¶æ³+å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆåˆ†æ
- **JSONè¿”å´**: æ§‹é€ åŒ–ã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ±ºå®šçµæœ
- **confidenceå€¤**: åˆ¤æ–­ã®ç¢ºä¿¡åº¦ã«ã‚ˆã‚‹å®Ÿè¡Œåˆ¶å¾¡

### KaitoTwitterAPIçµ±åˆ
- **æ—¢å­˜æ©Ÿèƒ½æ´»ç”¨**: x-poster.tsã®KaitoAPIçµ±åˆæ©Ÿèƒ½
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: KaitoAPIå¤±æ•—æ™‚ã®å¾“æ¥æ–¹å¼å¯¾å¿œ
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: 200 QPSåˆ¶é™å†…ã§ã®é©åˆ‡ãªå®Ÿè¡Œ

---

## ğŸ¯ æœ€çµ‚ç›®æ¨™

**30åˆ†ãŠãã«è‡ªå‹•å®Ÿè¡Œã—ã€Claudeåˆ¤æ–­ã§XæŠ•ç¨¿ãƒ»RTãƒ»ã„ã„ã­ç­‰ã‚’è¡Œã„ã€çµæœã‚’å­¦ç¿’ã—ã¦ç¶™ç¶šæ”¹å–„ã™ã‚‹MVPã‚·ã‚¹ãƒ†ãƒ ã®å®Œæˆ**

é ‘å¼µã£ã¦ãã ã•ã„ï¼å‹•ä½œã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿç¾ã‚’æœ€å„ªå…ˆã«å®Ÿè£…ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚ğŸš€