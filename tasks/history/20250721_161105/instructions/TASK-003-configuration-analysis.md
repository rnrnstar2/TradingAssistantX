# TASK-003: 設定ファイル分析・YAML構造整合性チェック

## 🎯 タスク概要
プロジェクト全体の設定ファイル・YAMLファイルを調査し、YAML駆動開発原則との整合性・データ構造の一貫性・設定ファイル配置ルール遵守を確認して最適化提案を作成する。

## 🔍 調査対象領域

### 1. data/ディレクトリ設定ファイル調査（最重要）

**修正済み設定ファイル**：
```
✅ 調査対象（修正済み）：
- data/account-analysis-results.json
- data/account-config.yaml
- data/context/execution-history.json
- data/daily-action-log.json
- data/expanded-action-decisions.yaml
```

**新規設定ファイル**：
```
🆕 調査対象（新規作成）：
- data/action-collection-strategies.yaml
```

**既存設定ファイル**：
```
📋 調査対象（既存）：
- data/autonomous-config.yaml
- data/account-strategy.yaml
- data/content-strategy.yaml
- data/growth-targets.yaml
- data/posting-data.yaml
- data/posting-history.yaml
```

### 2. YAML駆動開発原則整合性調査

**CLAUDE.mdで定義された原則**：
- 全設定・データファイルのYAML形式管理
- Claude Code SDK連携での動的操作最適化
- 自己文書化のコメント機能活用
- 実装ガイド準拠（yaml-driven-development.md）

**調査ポイント**：
- YAML形式vs JSON形式の混在状況
- YAML駆動開発ガイドライン準拠度
- コメント機能による自己文書化状況
- スキーマ・構造の一貫性

### 3. 設定ファイル配置ルール遵守調査

**CLAUDE.mdで定義された配置ルール**：
```
🚨 CRITICAL: 全ての設定・データファイルはdata/ディレクトリ配下に統一配置

✅ 配置場所: data/ ディレクトリ直下のみ
✅ ファイル形式: .yaml 拡張子必須
🚫 禁止場所: config/, settings/, ルートディレクトリ等
```

**命名規則**：
```
- 設定ファイル: {機能名}-config.yaml
- 戦略ファイル: {機能名}-strategy.yaml
- データファイル: {機能名}-data.yaml
- 履歴ファイル: {機能名}-history.yaml
```

### 4. データ構造・スキーマ整合性調査

**重点調査項目**：
- 同種設定ファイル間のスキーマ統一性
- バージョン管理フィールドの一貫性
- 必須フィールドの定義と遵守
- データ型の一貫性（string/number/boolean/array/object）

### 5. 実装コードとの整合性調査

**設定ローダー分析**：
```
src/utils/config-loader.ts
src/utils/yaml-utils.ts
```

**型定義との整合性**：
```
src/types/account-config.ts
src/types/autonomous-config.ts
src/types/content-strategy.ts
src/types/posting-data.ts
```

## 🛠️ 実行手順

### Phase 1: 設定ファイル詳細調査
1. **Readツール**で全設定ファイルを読み込み
2. **構造分析**：
   - YAML vs JSON形式の判定
   - スキーマ構造の把握
   - バージョン・メタデータ確認
3. **内容評価**：
   - 設定値の妥当性
   - コメント・文書化状況
   - 未使用・重複設定の特定

### Phase 2: YAML駆動開発準拠度評価
1. **yaml-driven-development.mdとの比較**
2. **準拠度評価**（A/B/C/D）
3. **改善必要箇所の特定**

### Phase 3: 配置ルール・命名規則チェック
1. **ファイル配置の妥当性確認**
2. **命名規則準拠度チェック**
3. **移動・リネームが必要なファイル特定**

### Phase 4: スキーマ・データ構造統一性分析
1. **同種ファイル間比較**
2. **データ型一貫性チェック**
3. **統一スキーマ提案**

### Phase 5: 実装コードとの整合性確認
1. **config-loader.tsでの使用方法確認**
2. **TypeScript型定義との対応確認**
3. **実装コードでの設定ファイル参照パターン分析**

## 📋 成果物要件

### 必須成果物
1. **設定ファイル分析レポート**：
   - 各ファイルの詳細分析結果
   - YAML vs JSON使用状況マップ
   - 品質評価（A/B/C/D）と問題点

2. **YAML駆動開発準拠度評価**：
   - 準拠度スコア（ファイル別・項目別）
   - 非準拠箇所の詳細リスト
   - 準拠化のための具体的改善案

3. **配置・命名規則違反リスト**：
   - 配置ルール違反ファイル
   - 命名規則違反ファイル
   - 修正すべきファイルの移動・リネーム案

4. **データ構造統一提案**：
   - 現在のスキーマ多様性問題
   - 統一スキーマ設計案
   - 段階的移行ロードマップ

5. **実装コード整合性評価**：
   - config-loader実装の問題点
   - 型定義と実ファイルの不整合
   - 改善提案（コード修正不要、設計提案のみ）

## ⚠️ 重要な制約・注意事項

### 🚫 **設定ファイル編集禁止**
- **YAMLファイルの修正・編集は一切禁止**
- **ファイルの移動・リネームは禁止**
- **調査・分析・提案作成のみ実行**

### ✅ **YAML駆動開発重視**
- **ドキュメント準拠**：yaml-driven-development.md必読
- **構造分析重視**：データモデリング観点含む
- **実用性確保**：実際の開発・運用への影響考慮

### 📂 **出力管理規則厳格遵守**
- **出力場所**: `tasks/20250721_161105/reports/` のみ
- **ファイル命名**: `REPORT-003-configuration-analysis.md`
- **補助資料**: 分析データのYAML形式レポート作成可

### 🔧 **調査手法**
- **Grepツール**：設定ファイル参照箇所検索
- **比較分析**：同種ファイル間の構造比較
- **整合性チェック**：型定義との対応確認

## 🎯 期待される価値
1. **構造統一**：YAML駆動開発の完全実現
2. **保守性向上**：一貫した設定管理による運用効率化
3. **品質確保**：データ整合性による信頼性向上
4. **開発効率**：統一された設定パターンによる生産性向上

---

**成功基準**: YAML駆動開発原則に完全準拠した設定ファイル構造の最適化案を提示すること