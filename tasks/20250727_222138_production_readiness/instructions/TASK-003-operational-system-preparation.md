# TASK-003: é‹ç”¨ä½“åˆ¶æ•´å‚™æŒ‡ç¤ºæ›¸

## ğŸ¯ **ãƒŸãƒƒã‚·ãƒ§ãƒ³**
æœ¬ç•ªé‹ç”¨é–‹å§‹ã«å‘ã‘ãŸç›£è¦–ãƒ»é‹ç”¨ãƒ»ä¿å®ˆä½“åˆ¶ã®å®Œå…¨æ•´å‚™

## ğŸ“‹ **å‰ææ¡ä»¶**
- TASK-001å®Œäº†ï¼ˆæœ¬ç•ªç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼‰
- TASK-002å®Œäº†ï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†ï¼‰
- æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèªæ¸ˆã¿

## âœ… **å®Ÿè¡Œé …ç›®**

### ğŸ“Š **STEP-1: ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰**

#### å®Ÿè¡Œç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä½œæˆ
```yaml
# ç›£è¦–è¨­å®š: src/data/config/monitoring-config.yaml
monitoring:
  enabled: true
  intervals:
    health_check: 300  # 5åˆ†é–“éš”
    performance_check: 600  # 10åˆ†é–“éš”
    cost_check: 3600  # 1æ™‚é–“é–“éš”
  
  alerts:
    api_error_rate: 10  # 10%ä»¥ä¸Šã§ã‚¢ãƒ©ãƒ¼ãƒˆ
    response_time: 1000  # 1ç§’ä»¥ä¸Šã§ã‚¢ãƒ©ãƒ¼ãƒˆ
    cost_threshold: 50  # $50/æ—¥ã§ã‚¢ãƒ©ãƒ¼ãƒˆ
```

#### ãƒ­ã‚°é›†ç´„ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
- **å¯¾è±¡**: `src/data/current/system-logs.yaml`
- **å†…å®¹**: 
  - [ ] APIå‘¼ã³å‡ºã—ãƒ­ã‚°
  - [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°é›†ç´„
  - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  - [ ] ã‚³ã‚¹ãƒˆè¿½è·¡ãƒ­ã‚°

### ğŸš¨ **STEP-2: ã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰**

#### ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ãƒ»é€šçŸ¥è¨­å®š
```typescript
// ã‚¢ãƒ©ãƒ¼ãƒˆå®šç¾©: src/shared/alert-definitions.ts
export const AlertThresholds = {
  apiErrorRate: 10,        // 10%ä»¥ä¸Šã®ã‚¨ãƒ©ãƒ¼ç‡
  responseTimeMs: 1000,    // 1ç§’ä»¥ä¸Šã®å¿œç­”æ™‚é–“
  qpsViolation: 210,       // 210 QPSä»¥ä¸Šï¼ˆåˆ¶é™è¶…éï¼‰
  dailyCostUsd: 50,        // $50/æ—¥ä»¥ä¸Šã®ã‚³ã‚¹ãƒˆ
  consecutiveFailures: 3   // é€£ç¶š3å›å¤±æ•—
} as const;
```

#### ç·Šæ€¥åœæ­¢ã‚·ã‚¹ãƒ†ãƒ 
- **ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶**:
  - [ ] APIåˆ¶é™é•åæ¤œçŸ¥
  - [ ] ç•°å¸¸ãªã‚³ã‚¹ãƒˆå¢—åŠ ï¼ˆ$100/æ—¥è¶…éï¼‰
  - [ ] é€£ç¶š5å›å¤±æ•—
  - [ ] TwitterAPI.ioéšœå®³æ¤œçŸ¥

### ğŸ“ˆ **STEP-3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**

#### è‡ªå‹•QPSèª¿æ•´æ©Ÿèƒ½
```typescript
// QPSæœ€é©åŒ–: src/kaito-api/core/qps-optimizer.ts
export class QPSOptimizer {
  private currentQPS = 150;  // åˆæœŸå€¤: ä½™è£•ã‚’æŒã£ãŸè¨­å®š
  private maxQPS = 200;      // TwitterAPI.ioåˆ¶é™
  
  public async optimizeQPS(responseTime: number): Promise<number> {
    if (responseTime > 700) {
      this.currentQPS = Math.max(100, this.currentQPS - 10);
    } else if (responseTime < 400) {
      this.currentQPS = Math.min(this.maxQPS, this.currentQPS + 5);
    }
    return this.currentQPS;
  }
}
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥å®Ÿè£…
- **å¯¾è±¡ãƒ‡ãƒ¼ã‚¿**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœŸé–“**: 1æ™‚é–“
- **æ›´æ–°æˆ¦ç•¥**: å®šæœŸæ›´æ–° + å¿…è¦æ™‚å¼·åˆ¶æ›´æ–°

### ğŸ”„ **STEP-4: è‡ªå‹•é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ **

#### è‡ªå‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°è¨­å®š
```bash
# cronè¨­å®šä¾‹ï¼ˆå®Ÿéš›ã®è¨­å®šã¯åˆ¥é€”ï¼‰
# 30åˆ†é–“éš”å®Ÿè¡Œ
*/30 * * * * cd /path/to/TradingAssistantX && REAL_DATA_MODE=true pnpm dev

# æ—¥æ¬¡ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
0 0 * * * cd /path/to/TradingAssistantX && ./scripts/log-rotation.sh

# é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
0 9 * * 1 cd /path/to/TradingAssistantX && ./scripts/weekly-report.sh
```

#### è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ 
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¯¾è±¡**:
  - [ ] `src/data/learning/` - å­¦ç¿’ãƒ‡ãƒ¼ã‚¿
  - [ ] `src/data/current/` - ç¾åœ¨ãƒ‡ãƒ¼ã‚¿
  - [ ] `src/data/context/` - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é »åº¦**: æ—¥æ¬¡
- **ä¿å­˜æœŸé–“**: 30æ—¥é–“

### ğŸ“‹ **STEP-5: é‹ç”¨æ‰‹é †æ›¸ä½œæˆ**

#### æ—¥æ¬¡é‹ç”¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
```markdown
## æ—¥æ¬¡é‹ç”¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### æœã®ç¢ºèªï¼ˆ9:00ï¼‰
- [ ] å¤œé–“ã®å®Ÿè¡ŒçŠ¶æ³ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
- [ ] APIä½¿ç”¨é‡ç¢ºèª
- [ ] ã‚³ã‚¹ãƒˆçŠ¶æ³ç¢ºèª

### å¤•ã®ç¢ºèªï¼ˆ18:00ï¼‰
- [ ] æ—¥ä¸­ã®å®Ÿè¡ŒçŠ¶æ³ç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ç¢ºèª
- [ ] å­¦ç¿’ãƒ‡ãƒ¼ã‚¿è“„ç©çŠ¶æ³ç¢ºèª
- [ ] ç¿Œæ—¥ã®äºˆå®šç¢ºèª
```

#### éšœå®³å¯¾å¿œæ‰‹é †æ›¸
```markdown
## éšœå®³å¯¾å¿œæ‰‹é †

### Level 1: APIå¿œç­”é…å»¶
1. QPSè¨­å®šç¢ºèªãƒ»èª¿æ•´
2. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ³ç¢ºèª
3. TwitterAPI.ioçŠ¶æ³ç¢ºèª

### Level 2: APIèªè¨¼ã‚¨ãƒ©ãƒ¼
1. APIã‚­ãƒ¼æœ‰åŠ¹æ€§ç¢ºèª
2. æ¨©é™è¨­å®šç¢ºèª
3. APIã‚­ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

### Level 3: ã‚·ã‚¹ãƒ†ãƒ åœæ­¢
1. ç·Šæ€¥åœæ­¢å®Ÿè¡Œ
2. ãƒ­ã‚°åé›†ãƒ»åˆ†æ
3. æ ¹æœ¬åŸå› èª¿æŸ»
4. ä¿®æ­£ãƒ»å†é–‹æ‰‹é †å®Ÿè¡Œ
```

## ğŸ“Š **å“è³ªä¿è¨¼ä½“åˆ¶**

### ğŸ” **å®šæœŸå“è³ªãƒã‚§ãƒƒã‚¯**
- **æ—¥æ¬¡**: ã‚¨ãƒ©ãƒ¼ç‡ã€å¿œç­”æ™‚é–“ã€ã‚³ã‚¹ãƒˆç¢ºèª
- **é€±æ¬¡**: å­¦ç¿’ãƒ‡ãƒ¼ã‚¿å“è³ªã€æŠ•ç¨¿å“è³ªè©•ä¾¡
- **æœˆæ¬¡**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¦‹ç›´ã—ã€æ”¹å–„è¨ˆç”»ç­–å®š

### ğŸ“ˆ **ç¶™ç¶šçš„æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹**
1. **ãƒ‡ãƒ¼ã‚¿åˆ†æ**: é€±æ¬¡ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿åˆ†æ
2. **æ”¹å–„ææ¡ˆ**: æœˆæ¬¡æ”¹å–„ææ¡ˆä½œæˆ
3. **å®Ÿè£…è¨ˆç”»**: å››åŠæœŸæ”¹å–„å®Ÿè£…è¨ˆç”»
4. **åŠ¹æœæ¸¬å®š**: æ”¹å–„åŠ¹æœã®å®šé‡çš„è©•ä¾¡

## ğŸ’° **ã‚³ã‚¹ãƒˆç®¡ç†ä½“åˆ¶**

### ğŸ“Š **ã‚³ã‚¹ãƒˆç›£è¦–è¨­å®š**
```yaml
# ã‚³ã‚¹ãƒˆè¨­å®š: src/data/config/cost-management.yaml
cost_management:
  daily_limit_usd: 30      # $30/æ—¥ä¸Šé™
  monthly_limit_usd: 800   # $800/æœˆä¸Šé™
  
  tracking:
    api_calls: true
    cost_per_call: 0.00015  # $0.00015/call
    
  alerts:
    daily_80_percent: true   # æ—¥æ¬¡80%åˆ°é”ã§ã‚¢ãƒ©ãƒ¼ãƒˆ
    monthly_90_percent: true # æœˆæ¬¡90%åˆ°é”ã§ã‚¢ãƒ©ãƒ¼ãƒˆ
```

### ğŸ’¡ **ã‚³ã‚¹ãƒˆæœ€é©åŒ–æˆ¦ç•¥**
- **åŠ¹ç‡çš„æŠ•ç¨¿**: é«˜ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæ™‚é–“å¸¯é›†ä¸­
- **APIã‚³ãƒ¼ãƒ«æœ€é©åŒ–**: å¿…è¦æœ€å°é™ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨**: é‡è¤‡ãƒ‡ãƒ¼ã‚¿å–å¾—å›é¿

## ğŸ“ **å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«**

### ğŸ“‹ **é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
- `tasks/20250727_222138_production_readiness/outputs/operation-manual.md`
- `tasks/20250727_222138_production_readiness/outputs/troubleshooting-guide.md`
- `tasks/20250727_222138_production_readiness/outputs/cost-management-guide.md`

### âš™ï¸ **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**
- `src/data/config/monitoring-config.yaml`
- `src/data/config/cost-management.yaml`
- `src/shared/alert-definitions.ts`

### ğŸ“Š **ç›£è¦–ãƒ‡ãƒ¼ã‚¿**
- `src/data/current/performance-metrics.yaml`
- `src/data/current/cost-tracking.yaml`
- `src/data/current/system-health.yaml`

## ğŸ¯ **å®Œäº†æ¡ä»¶**
ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ãƒ»é‹ç”¨æ‰‹é †æ›¸ãƒ»ã‚³ã‚¹ãƒˆç®¡ç†ä½“åˆ¶ã®å®Œå…¨æ•´å‚™ãŒå®Œäº†æ™‚ç‚¹ã§å®Œäº†ã¨ã™ã‚‹

---
**ManageræŒ‡ç¤º**: Workeræ¨©é™ã§ä¸Šè¨˜STEP-1ã€œ5ã‚’é †æ¬¡å®Ÿè¡Œã—ã€æœ¬ç•ªé‹ç”¨ã«å¿…è¦ãªå…¨ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã™ã‚‹ã“ã¨