# TASK-007: 全ドキュメントファイルの整合性更新

## 🎯 タスク概要
新しいワークフロー構造とスケジュール設計に合わせて、すべてのドキュメントを更新

## 📋 実装内容

### 1. workflow.md更新

#### メインワークフロー部分の変更
- **スケジュール実行時**: 3ステップ（データ収集 → アクション実行 → 結果保存）
- **手動実行時**: 4ステップ（データ収集 → アクション決定 → アクション実行 → 結果保存）

#### スケジュール設定部分の更新
- 階層構造（morning/lunch/evening/night）の削除
- フラットな時刻リスト形式の説明に変更
- 「アクション決定不要」の説明追加

#### 実行フロー図の更新
```
スケジュール実行時:
1. データ収集 → 2. アクション実行（事前決定） → 3. 結果保存

手動実行時:
1. データ収集 → 2. アクション決定（Claude） → 3. アクション実行 → 4. 結果保存
```

### 2. directory-structure.md更新

#### レガシー構造の削除
```
削除対象:
- main-workflows/           # 完全削除
  └── core/                # 完全削除
```

#### 現在の正しい構造
```
src/
├── workflows/                 # ワークフロー中核機能
│   ├── main-workflow.ts       # メインワークフロー実行
│   ├── constants.ts           # ワークフロー定数
│   └── action-executor.ts     # アクション実行
│
├── scheduler/                 # スケジューラー機能
│   ├── time-scheduler.ts      # 時刻スケジューラー
│   ├── schedule-loader.ts     # YAML読込
│   └── types.ts              # 型定義
│
├── claude/                    # Claude SDK統合
│   ├── endpoints/            # エンドポイント別実装
│   ├── types.ts              # Claude型定義
│   └── index.ts              # エクスポート
│
├── kaito-api/                # Kaito Twitter API
│   ├── core/                 # 認証・クライアント
│   ├── endpoints/            # API エンドポイント
│   └── types/                # API型定義
│
├── data/                     # データ管理
│   ├── data-manager.ts       # データ管理クラス
│   └── types.ts              # データ型定義
│
├── dev.ts                    # 開発用エントリー（単一実行）
├── main.ts                   # 本番用エントリー（スケジュール）
└── index.ts                  # 共通エクスポート
```

#### YAMLファイル構造の更新
```
data/
├── config/
│   ├── schedule.yaml         # スケジュール設定（フラット構造）
│   ├── api-config.yaml       # API設定
│   └── system-config.yaml    # システム設定
```

### 3. claude.md更新（必要に応じて）

#### エンドポイント設計の説明更新
- スケジュール実行時は`makeDecision`エンドポイントが使用されない旨を追記
- 手動実行時のみ全エンドポイントが使用される説明

### 4. README.md更新

#### ドキュメント説明の更新
- workflow.mdの説明を「3ステップ/4ステップ実行」に変更
- 最新の構造を反映

### 5. その他の整合性確認

#### 削除・更新が必要な記述
- 「4ステップワークフロー」→「3ステップ（スケジュール）/4ステップ（手動）」
- morning/lunch/evening/nightの時間帯区分の削除
- レガシーディレクトリへの参照削除

## ⚠️ 注意事項
- 実際のコード実装と一致するよう注意
- 存在しないファイルへの参照を削除
- 新旧の実行モードの違いを明確に記載

## 🔧 技術要件
- Markdownフォーマット
- 相互参照の整合性
- 実装と一致した説明

## 📂 成果物
- 更新: `docs/workflow.md`
- 更新: `docs/directory-structure.md`
- 更新: `docs/claude.md`（必要に応じて）
- 更新: `docs/README.md`

## ✅ 完了条件
- [ ] すべてのドキュメントが新構造を反映
- [ ] レガシー構造への参照がない
- [ ] 3ステップ/4ステップの説明が正確
- [ ] 相互参照が正しくリンクされている