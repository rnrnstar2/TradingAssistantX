# 深夜分析独立性の完全修正指示書

## タスク概要
docs/deep-night-analysis.mdから「追加ステップ」「通常ワークフロー完了後」などの誤った表現を全て削除し、深夜分析が独立したアクションであることを徹底する。

## 修正対象ファイル
- docs/deep-night-analysis.md

## 修正項目一覧

### 1. 位置づけセクション（16行目）
**現在**:
```
23:55のスケジュール実行時のみ、特別に**追加ステップ**として深夜分析が実行されます。
```
**修正後**:
```
23:55のスケジュール実行時は、`analyze`アクションが実行されます。これは他のアクション（post、retweet等）と同じ独立したアクションです。
```

### 2. 全体像セクション（32行目）
**現在**:
```
深夜分析は**通常ワークフローの完了後に追加実行される**独立した機能です。
```
**修正後**:
```
深夜分析（analyzeアクション）は、schedule.yamlで23:55に設定される独立したアクションです。
```

### 3. 23:55特別処理セクション（42-47行目）
**削除**: このセクション全体を削除し、以下に置き換え：
```markdown
#### analyzeアクション（23:55）
```
23:55に実行される`analyze`アクションは、他のアクション同様に通常の3ステップで実行されます：
Step 1: データ収集（分析用データの収集）
Step 2: アクション実行（深夜分析の実行）
Step 3: 結果保存（分析結果の保存）
```

### 4. 深夜分析（追加ステップ）（60行目）
**現在**:
```
2. 深夜分析（追加ステップ）
```
**修正後**:
```
2. analyzeアクション実行
```

### 5. コメント修正（81行目）
**現在**:
```
// 23:55のみ追加実行
```
**修正後**:
```
// 23:55のanalyzeアクション実行時
```

### 6. 実装メソッド説明（89行目）
**現在**:
```
- `executeDeepNightAnalysis()`は通常ワークフロー完了後に呼ばれる
```
**修正後**:
```
- `executeDeepNightAnalysis()`はanalyzeアクション実行時に呼ばれる
```

### 7. console.log修正（575行目）
**現在**:
```
console.log('🌙 Step 4: 深夜分析開始');
```
**修正後**:
```
console.log('🌙 深夜分析開始');
```

### 8. 実行メソッド説明（598行目）
**現在**:
```
- `executeDeepNightAnalysis()`: **通常ワークフロー完了後にStep 4として追加実行**
```
**修正後**:
```
- `executeDeepNightAnalysis()`: **analyzeアクション実行時に呼び出される**
```

### 9. 実行フロー説明（608行目）
**現在**:
```
2. Step 4として`executeDeepNightAnalysis()`を呼び出し
```
**修正後**:
```
2. analyzeアクション実行時に`executeDeepNightAnalysis()`を呼び出し
```

## 修正方針

### 基本原則
- 深夜分析 = `analyze`アクション（独立したアクション）
- 他のアクション（post、retweet等）と同列
- 通常の3ステップワークフローで実行
- 「追加」「特別」「Step 4」などの表現は全て削除

### 統一表現
- 「深夜分析（analyzeアクション）」または単に「analyzeアクション」
- 「23:55に実行されるanalyzeアクション」
- 「他のアクションと同様に」

## 確認事項
- 全ての「追加ステップ」表現が削除されているか
- 「通常ワークフロー完了後」という表現が削除されているか
- 「Step 4」への言及が削除されているか
- analyzeアクションが独立したアクションとして明確に記述されているか