# TradingAssistantX MVP要件定義書

---

# I. プロジェクト概要

## 🎯 MVPビジョン

**シンプルなX投稿自動化システム**
- 🚀 **30分間隔自動実行**: KaitoAPIを使った定期投稿システム
- 🎓 **投資教育コンテンツ**: 投資・トレードに関する教育的な投稿
- 🤖 **Claude判断**: Claude SDKによる最適なアクション決定
- 📚 **学習機能**: 実行結果を学習データとして蓄積・活用

## 💡 MVPの基本目標

### シンプル実行フロー
```
30分毎の自動実行:
1. 【データ読み込み】
   - DataManager: 設定・学習データ読み込み
   - KaitoAPI: アカウント状況確認

2. 【Claude判断】
   - 現在状況の分析
   - 最適なアクション決定

3. 【アクション実行】
   - 決定されたアクションの実行
   - 基本的なエラーハンドリング

4. 【結果記録】
   - 実行結果の記録
   - 学習データの更新
```

## 🎯 MVPの成功基準

### 基本機能要件
- [ ] **30分間隔自動実行**: 定期的な自動実行システム
- [ ] **Claude判断機能**: アクション決定システム
- [ ] **KaitoAPI連携**: 基本的なAPI操作機能
- [ ] **学習データ保存**: 実行結果の記録・活用

### 動作確認要件
- [ ] **継続実行**: 30分間隔での安定動作
- [ ] **アクション実行**: 各種アクションの正常実行
- [ ] **データ更新**: 実行結果の学習データ反映
- [ ] **エラー処理**: 基本的なエラー対応と継続実行

---

# II. システム設計

## 🏗️ MVPシステムアーキテクチャ

### シンプル設計
**動作確実性を最優先とした基本構成**

```
シンプル実装 > 複雑な設計
確実な動作 > 高度な機能
```

### 30分間隔実行システム
```
SchedulerManager (統合30分間隔制御)
     ↓
DataManager (設定・学習データ読み込み)
     ↓
ClaudeDecisionEngine (アクション決定)
     ↓
ActionExecutor (基本的なアクション実行)
     ↓
結果記録・学習データ更新
```

**SchedulerManager統合アーキテクチャ**:
- **CoreScheduler機能**: 30分間隔の自動実行制御、実行時間窓管理
- **MainLoop機能**: 実行サイクル管理、メトリクス収集・統計分析
- **統一管理**: スケジューラー状態・設定の一元管理

## 🚀 基本的なワークフロー（30分毎）

### メインループ実行順序
1. **スケジューラー起動**: 30分間隔でのシステム実行開始
2. **サイクル初期化**: 前回currentをhistoryにアーカイブ、新currentディレクトリ作成
3. **データ確認**: config・intelligence・直近historyから必要データ読み込み
4. **状況分析**: アカウント状況・市場動向・過去データの統合分析
5. **Claude判断**: 現在状況に基づく最適アクションの決定（decision.yaml保存）
6. **アクション実行**: 決定されたアクションの実行
7. **結果記録**: 実行結果をcurrent/に記録、投稿データを個別ファイル保存
8. **インデックス更新**: 投稿インデックス・実行サマリー更新
9. **次回待機**: 30分後の次回実行まで待機

### エラーハンドリング
- **基本的なtry-catch実装**
- **エラー時は次回実行に継続**
- **基本的なエラーログ記録**

## 🤖 Claude Code SDK アクション決定

**詳細仕様**: [docs/claude.md](docs/claude.md)

Claude Code SDKを使用したアクション決定・コンテンツ生成・分析システム。エンドポイント別設計により明確な責任分離を実現。

### 主要アクション
- **投稿 (post)**: 教育的コンテンツの作成・投稿
- **リツイート (retweet)**: 高品質投資教育コンテンツの拡散
- **引用リツイート (quote_tweet)**: 独自視点を加えた価値追加
- **いいね (like)**: 品質の高いコンテンツへの評価
- **待機 (wait)**: 適切なタイミングでの次回実行

## 🌐 KaitoTwitterAPI 連携

**詳細仕様**: [docs/kaito-api.md](docs/kaito-api.md)

KaitoTwitterAPIを使用したTwitter操作システム。2層認証アーキテクチャによる安全なAPI統合を実現。

### 主要機能
- **投稿管理**: テキスト投稿・画像付き投稿
- **エンゲージメント**: リツイート・いいね・引用リツイート
- **情報取得**: アカウント情報・投稿検索・トレンド取得
- **認証管理**: API Key + User Session による2層認証

---

# III. 実装仕様

## 📁 ディレクトリ・ファイル構造（MVP版）

**詳細仕様**: [docs/directory-structure.md](docs/directory-structure.md)

エンドポイント別設計による役割分離とデータ管理の2層アーキテクチャ（current/history）を採用。

---

**📌 このREQUIREMENTS.mdは、TradingAssistantX MVPの完全な実装ガイドです。**
**各セクションは論理的な順序で配置されており、プロジェクト理解から実装完了までの全体的な流れに沿っています。**